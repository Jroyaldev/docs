title: "Roles and access"
description: "Control who can view pastoral data, manage invites, and grant leadership permissions across ChurchDesk."
---

<Info>
  ChurchDesk relies on WorkOS AuthKit for authentication and Convex for role-aware permissions. Every user must sign in with the church email address that received their invite.
</Info>

## Role levels

<Tabs>
  <Tab title="Lead pastor">
    - Full administrative control over every workspace.
    - Can generate invites, promote others, and configure role titles.
    - Required for unlocking the People, Team, and Calendar moderation tools.
  </Tab>
  <Tab title="Pastor">
    - Shares leadership privileges with lead pastors except for demoting the final lead.
    - Can access restricted pastoral data, post private prayers, and manage team titles.
  </Tab>
  <Tab title="Staff">
    - Access to pastoral care records, tasks, chat, and calendar.
    - Cannot adjust global permissions but can create households, tasks, and sermons.
  </Tab>
  <Tab title="Volunteer">
    - Collaborates through chat, tasks, and public prayer updates.
    - No access to restricted people data or leadership controls.
  </Tab>
  <Tab title="Member">
    - Limited to personal follow-ups and any public prayer requests they submit.
    - Ideal for lay leaders who need occasional visibility without administrative rights.
  </Tab>
</Tabs>

<Tip>
Every workspace checks your Convex-backed role before loading sensitive data. If a page appears empty, confirm your role in the <a href="/workspaces/team">Team workspace</a>.
</Tip>

## Authentication flow

1. A leader creates an invite link from the People directory and selects a default role.
2. The recipient signs in through WorkOS AuthKit.
3. WorkOS issues a JWT with the `aud` claim that matches the Convex deployment.
4. Convex verifies the token and provisions the ChurchDesk user record.

<Warning>
Do not forward invite URLs publicly. Each link expires after first use or when the owner revokes it.
</Warning>

## Managing access

<Steps>
  <Step title="Promote or demote a teammate">
    1. Open the <a href="/workspaces/team">Team workspace</a>.
    2. Locate the teammate card and adjust the role selector.
    3. Optionally edit the displayed ministry title to match your context.

    <Check>
    Role changes take effect immediately across chat, tasks, and access-controlled pages.
    </Check>
  </Step>

  <Step title="Grant household access to a leader">
    1. Navigate to the <a href="/workspaces/people">Households view</a>.
    2. Confirm the teammate holds a Staff, Pastor, or Lead Pastor role.
    3. Share the household channel link generated by ChurchDesk chat.
  </Step>

  <Step title="Audit recent promotions">
    1. In the Team workspace, open the leadership activity banner.
    2. Review the Last Active metric on each team card.
    3. Revoke access if someone no longer needs leadership visibility.
  </Step>
</Steps>

## Troubleshooting access issues

<AccordionGroup>
  <Accordion title="User sees a restricted notice" icon="shield-check">
    Confirm they accepted the correct invite. Demote and re-promote them if the role did not sync on first sign-in.
  </Accordion>
  <Accordion title="WorkOS login succeeds but dashboard is blank" icon="alert-triangle">
    Run `npx convex dev` on the server to ensure the Convex deployment is healthy. The dashboard loads only when the JWT `aud` matches.
  </Accordion>
  <Accordion title="Need to remove leadership access quickly" icon="user-minus">
    Set the role to `volunteer` in Team, then revoke any outstanding invites from the People directory.
  </Accordion>
</AccordionGroup>
